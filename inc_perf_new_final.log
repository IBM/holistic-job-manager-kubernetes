"---"
"MAKE GLOBAL VARIABLES:"
"  "BIN_DIR="_output/bin"
"  "GIT_BRANCH="inc_perf"
"  "RELEASE_VER=""
"  "TAG="inc-perf-"
"  "GO_BUILD_ARGS=""
"---"
# Check for invalid tag name
t=inc-perf- && [ ${#t} -le 128 ] || { echo "Target name $t has 128 or more chars"; false; }
echo "Running e2e with MCAD local image: mcad-controller inc-perf- IfNotPresent."
Running e2e with MCAD local image: mcad-controller inc-perf- IfNotPresent.
hack/run-e2e-kind.sh mcad-controller inc-perf- IfNotPresent
CPU architecture for downloads is: arm64
checking prerequisites
found kind, version: kind v0.18.0 go1.20.2 darwin/arm64
found kubectl, Client Version: version.Info{Major:"1", Minor:"27", GitVersion:"v1.27.2", GitCommit:"7f6f68fdabc4df88cfea2dcf9a19b2b830f1e647", GitTreeState:"clean", BuildDate:"2023-05-17T14:13:27Z", GoVersion:"go1.20.4", Compiler:"gc", Platform:"darwin/arm64"}
Kustomize Version: v5.0.1
found kuttl plugin for kubectl, KUTTL Version: version.Info{GitVersion:"0.15.0", GitCommit:"f6d64c9", BuildDate:"2023-01-03T21:32:35Z", GoVersion:"go1.19.4", Compiler:"gc", Platform:"darwin/arm64"}
end to end test with mcad-controller:inc-perf-.
found helm, v3.11.3+g3232493
found helm, v3.11.3+g3232493
Running kind: [kind create cluster --name test  --config /Users/abhishekmalvankar/mcad/inc_perf/multi-cluster-app-dispatcher/hack/e2e-kind-config.yaml]
1.0: Pulling from kicbase/echo-server
Digest: sha256:127ac38a2bb9537b7f252addff209ea6801edcac8a92c8b1104dacd66a583ed6
Status: Image is up to date for kicbase/echo-server:1.0
docker.io/kicbase/echo-server:1.0
latest: Pulling from library/ubuntu
Digest: sha256:ec050c32e4a6085b423d36ecd025c0d3ff00c38ab93a3d71a460ff1c44fa6d77
Status: Image is up to date for ubuntu:latest
docker.io/library/ubuntu:latest
latest: Pulling from ubi8/ubi
Digest: sha256:b6616b280ec23c2283ac10e19dd3cd4c8e6df14599f6d93f662ca261273097a9
Status: Image is up to date for registry.access.redhat.com/ubi8/ubi:latest
registry.access.redhat.com/ubi8/ubi:latest
latest: Pulling from busybox
a3ed95caeb02: Already exists
a3ed95caeb02: Already exists
138cfc514ce4: Already exists
a3ed95caeb02: Already exists
Digest: sha256:d8d3bc2c183ed2f9f10e7258f84971202325ee6011ba137112e01e30f206de67
Status: Image is up to date for k8s.gcr.io/busybox:latest
k8s.gcr.io/busybox:latest
REPOSITORY                            TAG                      IMAGE ID       CREATED             SIZE
mcad-controller                       inc-perf-                759c591ee7ad   About an hour ago   250MB
<none>                                <none>                   028a48c2cd1a   19 hours ago        250MB
<none>                                <none>                   408195147193   20 hours ago        250MB
<none>                                <none>                   73741994e6d4   20 hours ago        250MB
<none>                                <none>                   cb8d7a0dae9b   31 hours ago        250MB
<none>                                <none>                   cd3a84bb6358   40 hours ago        250MB
<none>                                <none>                   9ab831b182f5   41 hours ago        250MB
<none>                                <none>                   0aa486daa892   42 hours ago        250MB
<none>                                <none>                   b6595618f159   2 days ago          250MB
<none>                                <none>                   e299715b244d   2 days ago          250MB
<none>                                <none>                   8868b3520c6d   4 days ago          264MB
mcad-controller                       delete-withoutqueuing-   85af97df91c7   5 days ago          264MB
mcad-controller                       refact-uqj-              2905f9246edc   5 days ago          224MB
<none>                                <none>                   8a4a362043a9   5 days ago          224MB
<none>                                <none>                   21cebc47c7f7   5 days ago          224MB
<none>                                <none>                   64a954098fd5   5 days ago          224MB
mcad-controller                       fix-tests-               05e13343c057   5 days ago          264MB
mcad-controller                       main-                    986d7ca0ae4d   6 days ago          264MB
<none>                                <none>                   7b9f40b96d07   6 days ago          224MB
<none>                                <none>                   8d2f0eccd784   6 days ago          224MB
mcad-controller                       exp-upd-                 aeed9ed41676   8 days ago          224MB
<none>                                <none>                   22e9c5f77656   8 days ago          224MB
mcad-controller                       doc-acc-                 8178571f2cd6   10 days ago         224MB
quay.io/asmalvan/main_0806            latest                   8178571f2cd6   10 days ago         224MB
mcad-controller                       main-v1.32.0             a6456b86c082   10 days ago         224MB
ubuntu                                latest                   a2f229f811bf   12 days ago         69.2MB
registry.access.redhat.com/ubi8/ubi   latest                   08ffb9f4b3b0   2 weeks ago         229MB
ubuntu                                <none>                   37f74891464b   7 weeks ago         69.2MB
registry.access.redhat.com/ubi8/ubi   <none>                   4a95277e7dad   7 weeks ago         229MB
kindest/node                          <none>                   b474a2070a7b   2 months ago        834MB
moby/buildkit                         buildx-stable-1          b55f446e1dd6   3 months ago        165MB
kicbase/echo-server                   1.0                      ce2d2cda2d85   13 months ago       4.78MB
kindest/node                          <none>                   3229c4d2a22f   2 years ago         1.06GB
k8s.gcr.io/busybox                    latest                   e7d168d7db45   8 years ago         2.43MB
Starting background proxy connection (pid=91218)...
Waiting for proxy process to start.
Connected to the kubelet for patching the nodes. Using port 64596.
- Patching node (add): test-control-plane
Patching done!
- Patching node (add): test-worker
Patching done!
Killing proxy (pid=91218)...
kubectl kuttl test --config /Users/abhishekmalvankar/mcad/inc_perf/multi-cluster-app-dispatcher/test/kuttl-test-extended-resources.yaml
=== RUN   kuttl
    harness.go:462: starting setup
    harness.go:252: running tests using configured kubeconfig.
    harness.go:275: Successful connection to cluster at: https://127.0.0.1:64572
    harness.go:360: running tests
    harness.go:73: going to run test suite with timeout of 60 seconds for each step
    harness.go:372: testsuite: test/e2e-kuttl-extended-resources/ has 1 tests
=== RUN   kuttl/harness
=== RUN   kuttl/harness/steps
=== PAUSE kuttl/harness/steps
=== CONT  kuttl/harness/steps
    logger.go:42: 17:17:12 | steps | Creating namespace: kuttl-test-up-stag
    logger.go:42: 17:17:12 | steps/0- | starting test step 0-
    logger.go:42: 17:17:15 | steps/0- | test step completed 0-
    logger.go:42: 17:17:15 | steps/1-install | starting test step 1-install
    logger.go:42: 17:17:15 | steps/1-install | Namespace:/extended-resources created
    logger.go:42: 17:17:15 | steps/1-install | test step completed 1-install
    logger.go:42: 17:17:15 | steps/2-install | starting test step 2-install
    logger.go:42: 17:17:15 | steps/2-install | Job:extended-resources/gpu-job created
    logger.go:42: 17:17:30 | steps/2-install | test step completed 2-install
    logger.go:42: 17:17:30 | steps | steps events from ns kuttl-test-up-stag:
    logger.go:42: 17:17:30 | steps | Deleting namespace: kuttl-test-up-stag
=== CONT  kuttl
    harness.go:405: run tests finished
    harness.go:513: cleaning up
    harness.go:570: removing temp folder: ""
--- PASS: kuttl (23.54s)
    --- PASS: kuttl/harness (0.00s)
        --- PASS: kuttl/harness/steps (23.46s)
PASS
Installing Podgroup CRD
customresourcedefinition.apiextensions.k8s.io/podgroups.scheduling.sigs.k8s.io created
node/test-control-plane untainted
Orchestrate cluster...
kubectl cordon test-worker
node/test-worker cordoned
kubectl -n kube-system delete pod coredns-787d4945fb-2flf8
pod "coredns-787d4945fb-2flf8" deleted
kubectl -n kube-system delete pod coredns-787d4945fb-xvdc9
pod "coredns-787d4945fb-xvdc9" deleted
kubectl uncordon test-worker
node/test-worker uncordoned
Waiting for pod in the kube-system namespace to be ready to become ready
kubectl kuttl test --config /Users/abhishekmalvankar/mcad/inc_perf/multi-cluster-app-dispatcher/test/kuttl-test.yaml
=== RUN   kuttl
    harness.go:462: starting setup
    harness.go:252: running tests using configured kubeconfig.
    harness.go:275: Successful connection to cluster at: https://127.0.0.1:64572
    logger.go:42: 17:17:50 |  | running command: [sh -c helm upgrade  --install mcad-controller deployment/mcad-controller --namespace kube-system --wait --set loglevel=${LOG_LEVEL} --set resources.requests.cpu=1000m --set resources.requests.memory=1024Mi --set resources.limits.cpu=4000m --set resources.limits.memory=4096Mi --set image.repository=$IMAGE_REPOSITORY_MCAD --set image.tag=$IMAGE_TAG_MCAD --set image.pullPolicy=$MCAD_IMAGE_PULL_POLICY --set configMap.quotaEnabled='"true"' --set quotaManagement.rbac.apiGroup=ibm.com --set quotaManagement.rbac.resource=quotasubtrees  --set configMap.name=mcad-controller-configmap --set configMap.preemptionEnabled='"true"']
    logger.go:42: 17:17:51 |  | WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /Users/abhishekmalvankar/mcad/inc_perf/multi-cluster-app-dispatcher/kubeconfig
    logger.go:42: 17:17:51 |  | WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: /Users/abhishekmalvankar/mcad/inc_perf/multi-cluster-app-dispatcher/kubeconfig
    logger.go:42: 17:17:51 |  | Release "mcad-controller" does not exist. Installing it now.
    logger.go:42: 17:17:54 |  | NAME: mcad-controller
    logger.go:42: 17:17:54 |  | LAST DEPLOYED: Wed Aug 16 17:17:51 2023
    logger.go:42: 17:17:54 |  | NAMESPACE: kube-system
    logger.go:42: 17:17:54 |  | STATUS: deployed
    logger.go:42: 17:17:54 |  | REVISION: 1
    logger.go:42: 17:17:54 |  | TEST SUITE: None
    logger.go:42: 17:17:54 |  | NOTES:
    logger.go:42: 17:17:54 |  | The batch system of Kubernetes.
    logger.go:42: 17:17:54 |  | running command: [sh -c kubectl apply -f ${ROOT_DIR}/test/e2e-kuttl/install-quota-subtree.yaml]
    logger.go:42: 17:17:54 |  | quotasubtree.ibm.com/context-root created
    logger.go:42: 17:17:54 |  | quotasubtree.ibm.com/service-root created
    logger.go:42: 17:17:54 |  | quotasubtree.ibm.com/context-root-children created
    logger.go:42: 17:17:54 |  | quotasubtree.ibm.com/service-root-children created
    harness.go:360: running tests
    harness.go:73: going to run test suite with timeout of 420 seconds for each step
    harness.go:372: testsuite: test/e2e-kuttl/ has 2 tests
=== RUN   kuttl/harness
=== RUN   kuttl/harness/quota-errors
=== PAUSE kuttl/harness/quota-errors
=== RUN   kuttl/harness/quota-forest
=== PAUSE kuttl/harness/quota-forest
=== CONT  kuttl/harness/quota-errors
=== CONT  kuttl/harness/quota-forest
=== CONT  kuttl/harness/quota-errors
    logger.go:42: 17:17:54 | quota-errors | Creating namespace: kuttl-test-apt-ghost
=== CONT  kuttl/harness/quota-forest
    logger.go:42: 17:17:54 | quota-forest | Creating namespace: kuttl-test-promoted-lobster
=== CONT  kuttl/harness/quota-errors
    logger.go:42: 17:17:54 | quota-errors/0- | starting test step 0-
=== CONT  kuttl/harness/quota-forest
    logger.go:42: 17:17:54 | quota-forest/0- | starting test step 0-
=== CONT  kuttl/harness/quota-errors
    logger.go:42: 17:17:54 | quota-errors/0- | test step completed 0-
    logger.go:42: 17:17:54 | quota-errors/1- | starting test step 1-
=== CONT  kuttl/harness/quota-forest
    logger.go:42: 17:17:54 | quota-forest/0- | test step completed 0-
    logger.go:42: 17:17:54 | quota-forest/1- | starting test step 1-
=== CONT  kuttl/harness/quota-errors
    logger.go:42: 17:17:54 | quota-errors/1- | test step completed 1-
    logger.go:42: 17:17:54 | quota-errors/2-install | starting test step 2-install
    logger.go:42: 17:17:54 | quota-errors/2-install | Namespace:/quota-errors created
=== CONT  kuttl/harness/quota-forest
    logger.go:42: 17:17:54 | quota-forest/1- | test step completed 1-
    logger.go:42: 17:17:54 | quota-forest/2-install | starting test step 2-install
=== CONT  kuttl/harness/quota-errors
    logger.go:42: 17:17:54 | quota-errors/2-install | test step completed 2-install
    logger.go:42: 17:17:54 | quota-errors/3-install | starting test step 3-install
=== CONT  kuttl/harness/quota-forest
    logger.go:42: 17:17:54 | quota-forest/2-install | Namespace:/test created
=== CONT  kuttl/harness/quota-errors
    logger.go:42: 17:17:54 | quota-errors/3-install | AppWrapper:quota-errors/deployment-silver-lo-pri-1replica created
=== CONT  kuttl/harness/quota-forest
    logger.go:42: 17:17:54 | quota-forest/2-install | test step completed 2-install
    logger.go:42: 17:17:54 | quota-forest/3-install | starting test step 3-install
    logger.go:42: 17:17:54 | quota-forest/3-install | Job:test/job-delay-step created
=== CONT  kuttl/harness/quota-errors
    logger.go:42: 17:17:58 | quota-errors/3-install | test step completed 3-install
    logger.go:42: 17:17:58 | quota-errors/4-delete-app-wrapper | starting test step 4-delete-app-wrapper
    logger.go:42: 17:17:58 | quota-errors/4-delete-app-wrapper | running command: [kubectl delete appwrapper -n quota-errors deployment-silver-lo-pri-1replica]
    logger.go:42: 17:17:59 | quota-errors/4-delete-app-wrapper | appwrapper.mcad.ibm.com "deployment-silver-lo-pri-1replica" deleted
    logger.go:42: 17:17:59 | quota-errors/4-delete-app-wrapper | test step completed 4-delete-app-wrapper
    logger.go:42: 17:17:59 | quota-errors/5-reapply-app-wrapper | starting test step 5-reapply-app-wrapper
    logger.go:42: 17:17:59 | quota-errors/5-reapply-app-wrapper | AppWrapper:quota-errors/deployment-silver-lo-pri-1replica created
    logger.go:42: 17:18:01 | quota-errors/5-reapply-app-wrapper | test step completed 5-reapply-app-wrapper
    logger.go:42: 17:18:01 | quota-errors/99-cleanup | starting test step 99-cleanup
    logger.go:42: 17:18:01 | quota-errors/99-cleanup | running command: [kubectl delete namespace quota-errors --wait]
    logger.go:42: 17:18:01 | quota-errors/99-cleanup | namespace "quota-errors" deleted
=== CONT  kuttl/harness/quota-forest
    logger.go:42: 17:18:11 | quota-forest/3-install | test step completed 3-install
    logger.go:42: 17:18:11 | quota-forest/4-install | starting test step 4-install
    logger.go:42: 17:18:11 | quota-forest/4-install | AppWrapper:test/job-gold-lo-pri-1replica created
=== CONT  kuttl/harness/quota-errors
    logger.go:42: 17:18:11 | quota-errors/99-cleanup | test step completed 99-cleanup
    logger.go:42: 17:18:11 | quota-errors | quota-errors events from ns kuttl-test-apt-ghost:
    logger.go:42: 17:18:11 | quota-errors | Deleting namespace: kuttl-test-apt-ghost
=== CONT  kuttl/harness/quota-forest
    logger.go:42: 17:18:12 | quota-forest/4-install | test step completed 4-install
    logger.go:42: 17:18:12 | quota-forest/5-install | starting test step 5-install
    logger.go:42: 17:18:12 | quota-forest/5-install | AppWrapper:test/job-bad-quota-id-10replica created
    logger.go:42: 17:18:13 | quota-forest/5-install | test step completed 5-install
    logger.go:42: 17:18:13 | quota-forest/6-install | starting test step 6-install
    logger.go:42: 17:18:13 | quota-forest/6-install | AppWrapper:test/job-gold-high-pri-1replica created
    logger.go:42: 17:25:14 | quota-forest/6-install | test step failed 6-install
    case.go:364: failed in step 6-install
    case.go:366: --- AppWrapper:test/job-gold-lo-pri-1replica
        +++ AppWrapper:test/job-gold-lo-pri-1replica
        @@ -4,8 +4,108 @@
           labels:
             quota_context: gold
             quota_service: gold
        +  managedFields:
        +  - apiVersion: mcad.ibm.com/v1beta1
        +    fieldsType: FieldsV1
        +    fieldsV1:
        +      f:metadata:
        +        f:labels:
        +          .: {}
        +          f:quota_context: {}
        +          f:quota_service: {}
        +      f:spec:
        +        .: {}
        +        f:resources:
        +          .: {}
        +          f:GenericItems: {}
        +        f:service:
        +          .: {}
        +          f:spec: {}
        +    manager: kubectl-kuttl
        +    operation: Update
        +    time: "2023-08-16T21:18:11Z"
        +  - apiVersion: mcad.ibm.com/v1beta1
        +    fieldsType: FieldsV1
        +    fieldsV1:
        +      f:status:
        +        .: {}
        +        f:canrun: {}
        +        f:conditions: {}
        +        f:controllerfirsttimestamp: {}
        +        f:filterignore: {}
        +        f:queuejobstate: {}
        +        f:sender: {}
        +        f:state: {}
        +    manager: mcad-controller
        +    operation: Update
        +    subresource: status
        +    time: "2023-08-16T21:18:11Z"
           name: job-gold-lo-pri-1replica
           namespace: test
        +spec:
        +  resources:
        +    GenericItems:
        +    - generictemplate:
        +        apiVersion: apps/v1
        +        kind: StatefulSet
        +        metadata:
        +          labels:
        +            app: job-gold-lo-pri-1replica
        +          name: job-gold-lo-pri-1replica
        +          namespace: test
        +        spec:
        +          replicas: 1
        +          selector:
        +            matchLabels:
        +              app: job-gold-lo-pri-1replica
        +          template:
        +            metadata:
        +              labels:
        +                app: job-gold-lo-pri-1replica
        +                size: "1"
        +            spec:
        +              containers:
        +              - command:
        +                - /bin/sh
        +                - -c
        +                - while true; do sleep 10; done
        +                image: registry.access.redhat.com/ubi8/ubi:latest
        +                name: job-gold-lo-pri-1replica
        +                resources:
        +                  limits:
        +                    cpu: 600m
        +                    memory: 95Mi
        +                  requests:
        +                    cpu: 600m
        +                    memory: 95Mi
        +      replicas: 1
        +  service:
        +    spec: {}
         status:
        -  state: Pending
        +  canrun: true
        +  conditions:
        +  - lastTransitionMicroTime: "2023-08-16T21:18:11.489149Z"
        +    lastUpdateMicroTime: "2023-08-16T21:18:11.489149Z"
        +    status: "True"
        +    type: Init
        +  - lastTransitionMicroTime: "2023-08-16T21:18:11.489159Z"
        +    lastUpdateMicroTime: "2023-08-16T21:18:11.489159Z"
        +    reason: AwaitingHeadOfLine
        +    status: "True"
        +    type: Queueing
        +  - lastTransitionMicroTime: "2023-08-16T21:18:11.494978Z"
        +    lastUpdateMicroTime: "2023-08-16T21:18:11.494978Z"
        +    reason: FrontOfQueue.
        +    status: "True"
        +    type: HeadOfLine
        +  - lastTransitionMicroTime: "2023-08-16T21:18:11.571897Z"
        +    lastUpdateMicroTime: "2023-08-16T21:18:11.571897Z"
        +    reason: AppWrapperRunnable
        +    status: "True"
        +    type: Dispatched
        +  controllerfirsttimestamp: "2023-08-16T21:18:11.489149Z"
        +  filterignore: true
        +  queuejobstate: Dispatched
        +  sender: before manageQueueJob - afterEtcdDispatching
        +  state: Running
         
        
    case.go:366: resource AppWrapper:test/job-gold-lo-pri-1replica: .status.state: value mismatch, expected: Pending != actual: Running
    logger.go:42: 17:25:14 | quota-forest | quota-forest events from ns kuttl-test-promoted-lobster:
    logger.go:42: 17:25:14 | quota-forest | Deleting namespace: kuttl-test-promoted-lobster
=== CONT  kuttl
    harness.go:405: run tests finished
    harness.go:513: cleaning up
    harness.go:570: removing temp folder: ""
--- FAIL: kuttl (448.58s)
    --- FAIL: kuttl/harness (0.00s)
        --- PASS: kuttl/harness/quota-errors (21.88s)
        --- FAIL: kuttl/harness/quota-forest (444.67s)
FAIL
kuttl e2e test '/Users/abhishekmalvankar/mcad/inc_perf/multi-cluster-app-dispatcher/test/kuttl-test.yaml' failure, exiting.
==========================>>>>> Cleaning up... <<<<<==========================
 
Custom Resource Definitions...
kubectl get crds
NAME                               CREATED AT
appwrappers.mcad.ibm.com           2023-08-16T21:17:51Z
podgroups.scheduling.sigs.k8s.io   2023-08-16T21:17:37Z
quotasubtrees.ibm.com              2023-08-16T21:17:51Z
schedulingspecs.mcad.ibm.com       2023-08-16T21:17:51Z
---
Get All AppWrappers...
apiVersion: v1
items: []
kind: List
metadata:
  resourceVersion: ""
---
Describe all AppWrappers...
---
'test' Pod list...
NAME                           READY   STATUS        RESTARTS   AGE
job-gold-high-pri-1replica-0   1/1     Terminating   0          5m47s
job-gold-lo-pri-1replica-0     1/1     Terminating   0          7m8s
---
'test' Pod yaml...
apiVersion: v1
items:
- apiVersion: v1
  kind: Pod
  metadata:
    creationTimestamp: "2023-08-16T21:19:32Z"
    deletionGracePeriodSeconds: 30
    deletionTimestamp: "2023-08-16T21:25:44Z"
    generateName: job-gold-high-pri-1replica-
    labels:
      app: job-gold-high-pri-1replica
      appwrapper.mcad.ibm.com: job-gold-high-pri-1replica
      controller-revision-hash: job-gold-high-pri-1replica-69cf5fd4c6
      resourceName: job-gold-high-pri-1replica
      size: "1"
      statefulset.kubernetes.io/pod-name: job-gold-high-pri-1replica-0
    name: job-gold-high-pri-1replica-0
    namespace: test
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: StatefulSet
      name: job-gold-high-pri-1replica
      uid: 68298c3d-5613-4f04-9f9c-561e2f7d3b33
    resourceVersion: "1661"
    uid: 408a70a9-88bc-467a-a107-e328a6bea551
  spec:
    containers:
    - command:
      - /bin/sh
      - -c
      - while true; do sleep 10; done
      image: registry.access.redhat.com/ubi8/ubi:latest
      imagePullPolicy: Always
      name: job-gold-high-pri-1replica
      resources:
        limits:
          cpu: 600m
          memory: 95Mi
        requests:
          cpu: 600m
          memory: 95Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-tjz4g
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    hostname: job-gold-high-pri-1replica-0
    nodeName: test-control-plane
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: default
    serviceAccountName: default
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - name: kube-api-access-tjz4g
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2023-08-16T21:19:32Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2023-08-16T21:19:35Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2023-08-16T21:19:35Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2023-08-16T21:19:32Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://1b1b05b0eb27f525c7f83c9156bb8072b8a5ea4603d3c89746d2f2faec92d0da
      image: registry.access.redhat.com/ubi8/ubi:latest
      imageID: docker.io/library/import-2023-08-16@sha256:6f96ab586c86980cb1555fcd4d5054c5180d2d66866d58915e3672fb4a0d7eb2
      lastState: {}
      name: job-gold-high-pri-1replica
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2023-08-16T21:19:34Z"
    hostIP: 172.19.0.3
    phase: Running
    podIP: 10.244.0.8
    podIPs:
    - ip: 10.244.0.8
    qosClass: Guaranteed
    startTime: "2023-08-16T21:19:32Z"
- apiVersion: v1
  kind: Pod
  metadata:
    creationTimestamp: "2023-08-16T21:18:11Z"
    deletionGracePeriodSeconds: 30
    deletionTimestamp: "2023-08-16T21:25:44Z"
    generateName: job-gold-lo-pri-1replica-
    labels:
      app: job-gold-lo-pri-1replica
      appwrapper.mcad.ibm.com: job-gold-lo-pri-1replica
      controller-revision-hash: job-gold-lo-pri-1replica-658564b76
      resourceName: job-gold-lo-pri-1replica
      size: "1"
      statefulset.kubernetes.io/pod-name: job-gold-lo-pri-1replica-0
    name: job-gold-lo-pri-1replica-0
    namespace: test
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: StatefulSet
      name: job-gold-lo-pri-1replica
      uid: 1efeaf83-d5f1-4e97-8f5a-3e51ef69ee1f
    resourceVersion: "1665"
    uid: 7ac06494-9210-4297-9d77-f81a9ae734f9
  spec:
    containers:
    - command:
      - /bin/sh
      - -c
      - while true; do sleep 10; done
      image: registry.access.redhat.com/ubi8/ubi:latest
      imagePullPolicy: Always
      name: job-gold-lo-pri-1replica
      resources:
        limits:
          cpu: 600m
          memory: 95Mi
        requests:
          cpu: 600m
          memory: 95Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-vttmd
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    hostname: job-gold-lo-pri-1replica-0
    nodeName: test-worker
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: default
    serviceAccountName: default
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - name: kube-api-access-vttmd
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2023-08-16T21:18:11Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2023-08-16T21:18:12Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2023-08-16T21:18:12Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2023-08-16T21:18:11Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://490870da8bde608f87e310dae0e841f885ec267dc05dc9d5e96b73da68c5884f
      image: registry.access.redhat.com/ubi8/ubi:latest
      imageID: docker.io/library/import-2023-08-16@sha256:6f96ab586c86980cb1555fcd4d5054c5180d2d66866d58915e3672fb4a0d7eb2
      lastState: {}
      name: job-gold-lo-pri-1replica
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2023-08-16T21:18:12Z"
    hostIP: 172.19.0.2
    phase: Running
    podIP: 10.244.1.6
    podIPs:
    - ip: 10.244.1.6
    qosClass: Guaranteed
    startTime: "2023-08-16T21:18:11Z"
kind: List
metadata:
  resourceVersion: ""
---
'test' Pod descriptions...
Name:                      job-gold-high-pri-1replica-0
Namespace:                 test
Priority:                  0
Service Account:           default
Node:                      test-control-plane/172.19.0.3
Start Time:                Wed, 16 Aug 2023 17:19:32 -0400
Labels:                    app=job-gold-high-pri-1replica
                           appwrapper.mcad.ibm.com=job-gold-high-pri-1replica
                           controller-revision-hash=job-gold-high-pri-1replica-69cf5fd4c6
                           resourceName=job-gold-high-pri-1replica
                           size=1
                           statefulset.kubernetes.io/pod-name=job-gold-high-pri-1replica-0
Annotations:               <none>
Status:                    Terminating (lasts <invalid>)
Termination Grace Period:  30s
IP:                        10.244.0.8
IPs:
  IP:           10.244.0.8
Controlled By:  StatefulSet/job-gold-high-pri-1replica
Containers:
  job-gold-high-pri-1replica:
    Container ID:  containerd://1b1b05b0eb27f525c7f83c9156bb8072b8a5ea4603d3c89746d2f2faec92d0da
    Image:         registry.access.redhat.com/ubi8/ubi:latest
    Image ID:      docker.io/library/import-2023-08-16@sha256:6f96ab586c86980cb1555fcd4d5054c5180d2d66866d58915e3672fb4a0d7eb2
    Port:          <none>
    Host Port:     <none>
    Command:
      /bin/sh
      -c
      while true; do sleep 10; done
    State:          Running
      Started:      Wed, 16 Aug 2023 17:19:34 -0400
    Ready:          True
    Restart Count:  0
    Limits:
      cpu:     600m
      memory:  95Mi
    Requests:
      cpu:        600m
      memory:     95Mi
    Environment:  <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-tjz4g (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  kube-api-access-tjz4g:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   Guaranteed
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:                      <none>


Name:                      job-gold-lo-pri-1replica-0
Namespace:                 test
Priority:                  0
Service Account:           default
Node:                      test-worker/172.19.0.2
Start Time:                Wed, 16 Aug 2023 17:18:11 -0400
Labels:                    app=job-gold-lo-pri-1replica
                           appwrapper.mcad.ibm.com=job-gold-lo-pri-1replica
                           controller-revision-hash=job-gold-lo-pri-1replica-658564b76
                           resourceName=job-gold-lo-pri-1replica
                           size=1
                           statefulset.kubernetes.io/pod-name=job-gold-lo-pri-1replica-0
Annotations:               <none>
Status:                    Terminating (lasts <invalid>)
Termination Grace Period:  30s
IP:                        10.244.1.6
IPs:
  IP:           10.244.1.6
Controlled By:  StatefulSet/job-gold-lo-pri-1replica
Containers:
  job-gold-lo-pri-1replica:
    Container ID:  containerd://490870da8bde608f87e310dae0e841f885ec267dc05dc9d5e96b73da68c5884f
    Image:         registry.access.redhat.com/ubi8/ubi:latest
    Image ID:      docker.io/library/import-2023-08-16@sha256:6f96ab586c86980cb1555fcd4d5054c5180d2d66866d58915e3672fb4a0d7eb2
    Port:          <none>
    Host Port:     <none>
    Command:
      /bin/sh
      -c
      while true; do sleep 10; done
    State:          Running
      Started:      Wed, 16 Aug 2023 17:18:12 -0400
    Ready:          True
    Restart Count:  0
    Limits:
      cpu:     600m
      memory:  95Mi
    Requests:
      cpu:        600m
      memory:     95Mi
    Environment:  <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-vttmd (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  kube-api-access-vttmd:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   Guaranteed
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:                      <none>
---
'all' Namespaces  list...
NAME                 STATUS        AGE
default              Active        9m23s
kube-node-lease      Active        9m24s
kube-public          Active        9m24s
kube-system          Active        9m24s
local-path-storage   Active        9m20s
test                 Terminating   7m25s
---
'aw-namespace-1' Namespace  list...
====================================================================================
==========================>>>>> MCAD Controller Logs <<<<<==========================
====================================================================================
kubectl logs mcad-controller-6b88f8b8c-h7sng -n kube-system
I0816 21:17:52.772697       1 queuejobresources.go:62] Registered queue job resource type Pod
I0816 21:17:52.974905       1 queuejob_controller_ex.go:243] [Controller] Agent mode
E0816 21:17:52.974923       1 queuejobagent.go:64] [agentEventQueue] Invalid agent configuration: .  Agent cluster will not be instantiated.
I0816 21:17:54.964096       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop deployment-silver-lo-pri-1replica *Delay=0.017884 seconds RemainingLength=0 &qj=0x40009be400 Version=841 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Queueing ControllerFirstTimestamp:2023-08-16 21:17:54.946204 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before manageQueueJob - setQueueing Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:17:54.946205 +0000 UTC LastTransitionMicroTime:2023-08-16 21:17:54.946205 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:17:54.94622 +0000 UTC LastTransitionMicroTime:2023-08-16 21:17:54.94622 +0000 UTC Reason:AwaitingHeadOfLine Message:}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:17:54.970408       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'quota-errors/deployment-silver-lo-pri-1replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:17:54.946204 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:17:54.946205 +0000 UTC 2023-08-16 21:17:54.946205 +0000 UTC  } {Queueing True 2023-08-16 21:17:54.94622 +0000 UTC 2023-08-16 21:17:54.94622 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:17:54.964139 +0000 UTC 2023-08-16 21:17:54.964139 +0000 UTC FrontOfQueue. }] [] 0 0 0 0 0}
I0816 21:17:54.970759       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'quota-errors/deployment-silver-lo-pri-1replica' with resources cpu 100.00, memory 33554432.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:17:54.970835       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'deployment-silver-lo-pri-1replica/deployment-silver-lo-pri-1replica' at 103.833µs activeQ=false Unsched=true &qj=0x40009be400 Version=844 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:17:54.946204 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:17:54.946205 +0000 UTC LastTransitionMicroTime:2023-08-16 21:17:54.946205 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:17:54.94622 +0000 UTC LastTransitionMicroTime:2023-08-16 21:17:54.94622 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:17:54.964139 +0000 UTC LastTransitionMicroTime:2023-08-16 21:17:54.964139 +0000 UTC Reason:FrontOfQueue. Message:}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:17:54.970890       1 treecache.go:411] root node is missing; creating empty tree 
W0816 21:17:54.970898       1 quotamanager.go:91] Warning: cache not clean after tree created: Response: {TreeName=quota_context; RootNodeName=""; DanglingNodeNames=[]} 
E0816 21:17:54.970923       1 treecache.go:411] root node is missing; creating empty tree 
W0816 21:17:54.970930       1 quotamanager.go:91] Warning: cache not clean after tree created: Response: {TreeName=quota_service; RootNodeName=""; DanglingNodeNames=[]} 
I0816 21:17:54.971076       1 queuejob_controller_ex.go:1183] [ScheduleNext] [Agent mode] quota evaluation successful for app wrapper 'quota-errors/deployment-silver-lo-pri-1replica' activeQ=%!t(time.Duration=344250) Unsched=false &qj=%!p(bool=true) Version=&{{ } {deployment-silver-lo-pri-1replica  quota-errors  d9a4efbc-5c31-4f77-922f-c835b9370562 844 %!s(int64=1) 2023-08-16 21:17:54 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:silver quota_service:gold] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:17:54 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:17:54 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"Deployment","metadata":{"labels":{"app":"deployment-silver-lo-pri-1replica"},"name":"deployment-silver-lo-pri-1replica","namespace":"quota-errors"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"deployment-silver-lo-pri-1replica"}},"template":{"metadata":{"labels":{"app":"deployment-silver-lo-pri-1replica"}},"spec":{"containers":[{"image":"kicbase/echo-server:1.0","name":"deployment-silver-lo-pri-1replica","ports":[{"containerPort":80}],"resources":{"limits":{"cpu":"100m","memory":"32Mi"},"requests":{"cpu":"100m","memory":"32Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:17:54.946204 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:17:54.946205 +0000 UTC 2023-08-16 21:17:54.946205 +0000 UTC  } {Queueing True 2023-08-16 21:17:54.94622 +0000 UTC 2023-08-16 21:17:54.94622 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:17:54.964139 +0000 UTC 2023-08-16 21:17:54.964139 +0000 UTC FrontOfQueue. }] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=844%!(EXTRA v1beta1.AppWrapperStatus={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:17:54.946204 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:17:54.946205 +0000 UTC 2023-08-16 21:17:54.946205 +0000 UTC  } {Queueing True 2023-08-16 21:17:54.94622 +0000 UTC 2023-08-16 21:17:54.94622 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:17:54.964139 +0000 UTC 2023-08-16 21:17:54.964139 +0000 UTC FrontOfQueue. }] [] 0 0 0 0 0})
I0816 21:17:55.040263       1 queuejob_controller_ex.go:1868] [syncQueueJob] Pod counts updated for app wrapper 'quota-errors/deployment-silver-lo-pri-1replica' Version=859 Status.CanRun=true Status.State=Running, pod counts [Pending: 1, Running: 0, Succeded: 0, Failed 0]
I0816 21:17:55.040285       1 queuejob_controller_ex.go:2001] [manageQueueJob] Getting completion status for app wrapper 'quota-errors/deployment-silver-lo-pri-1replica' Version=859 Status.CanRun=true Status.State=Running, pod counts [Pending: 1, Running: 0, Succeded: 0, Failed 0]
E0816 21:17:59.143247       1 qm_lib_backend_with_quotasubt_mgr.go:620] [Release] Quota release for quota-errors/deployment-silver-lo-pri-1replica failed.
E0816 21:17:59.152218       1 qm_lib_backend_with_quotasubt_mgr.go:628] [Release] Error removing Quota request definition id: NAMESPACE_quota-errors_AWNAME_deployment-silver-lo-pri-1replica for AppWrapper quota-errors/deployment-silver-lo-pri-1replica, err=&errors.errorString{s:"consumer NAMESPACE_quota-errors_AWNAME_deployment-silver-lo-pri-1replica does not exist"}.
W0816 21:17:59.158235       1 qm_lib_backend_with_quotasubt_mgr.go:637] [Release] Removing Quota request definition for quota-errors/deployment-silver-lo-pri-1replica unsuccessful.
I0816 21:17:59.166551       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop deployment-silver-lo-pri-1replica *Delay=0.008269 seconds RemainingLength=0 &qj=0x40000ec400 Version=892 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Queueing ControllerFirstTimestamp:2023-08-16 21:17:59.158266 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before manageQueueJob - setQueueing Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:17:59.158266 +0000 UTC LastTransitionMicroTime:2023-08-16 21:17:59.158266 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:17:59.158278 +0000 UTC LastTransitionMicroTime:2023-08-16 21:17:59.158278 +0000 UTC Reason:AwaitingHeadOfLine Message:}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:17:59.171628       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'quota-errors/deployment-silver-lo-pri-1replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:17:59.158266 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:17:59.158266 +0000 UTC 2023-08-16 21:17:59.158266 +0000 UTC  } {Queueing True 2023-08-16 21:17:59.158278 +0000 UTC 2023-08-16 21:17:59.158278 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:17:59.166777 +0000 UTC 2023-08-16 21:17:59.166778 +0000 UTC FrontOfQueue. }] [] 0 0 0 0 0}
I0816 21:17:59.171780       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'quota-errors/deployment-silver-lo-pri-1replica' with resources cpu 100.00, memory 33554432.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:17:59.171878       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'deployment-silver-lo-pri-1replica/deployment-silver-lo-pri-1replica' at 160.791µs activeQ=false Unsched=true &qj=0x40000ec400 Version=893 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:17:59.158266 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:17:59.158266 +0000 UTC LastTransitionMicroTime:2023-08-16 21:17:59.158266 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:17:59.158278 +0000 UTC LastTransitionMicroTime:2023-08-16 21:17:59.158278 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:17:59.166777 +0000 UTC LastTransitionMicroTime:2023-08-16 21:17:59.166778 +0000 UTC Reason:FrontOfQueue. Message:}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
I0816 21:17:59.171999       1 queuejob_controller_ex.go:1183] [ScheduleNext] [Agent mode] quota evaluation successful for app wrapper 'quota-errors/deployment-silver-lo-pri-1replica' activeQ=%!t(time.Duration=280333) Unsched=false &qj=%!p(bool=true) Version=&{{ } {deployment-silver-lo-pri-1replica  quota-errors  610c8340-2547-4160-8365-fb57879f3656 893 %!s(int64=1) 2023-08-16 21:17:59 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:silver quota_service:gold] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:17:59 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:17:59 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"Deployment","metadata":{"labels":{"app":"deployment-silver-lo-pri-1replica"},"name":"deployment-silver-lo-pri-1replica","namespace":"quota-errors"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"deployment-silver-lo-pri-1replica"}},"template":{"metadata":{"labels":{"app":"deployment-silver-lo-pri-1replica"}},"spec":{"containers":[{"image":"kicbase/echo-server:1.0","name":"deployment-silver-lo-pri-1replica","ports":[{"containerPort":80}],"resources":{"limits":{"cpu":"100m","memory":"32Mi"},"requests":{"cpu":"100m","memory":"32Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:17:59.158266 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:17:59.158266 +0000 UTC 2023-08-16 21:17:59.158266 +0000 UTC  } {Queueing True 2023-08-16 21:17:59.158278 +0000 UTC 2023-08-16 21:17:59.158278 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:17:59.166777 +0000 UTC 2023-08-16 21:17:59.166778 +0000 UTC FrontOfQueue. }] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=893%!(EXTRA v1beta1.AppWrapperStatus={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:17:59.158266 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:17:59.158266 +0000 UTC 2023-08-16 21:17:59.158266 +0000 UTC  } {Queueing True 2023-08-16 21:17:59.158278 +0000 UTC 2023-08-16 21:17:59.158278 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:17:59.166777 +0000 UTC 2023-08-16 21:17:59.166778 +0000 UTC FrontOfQueue. }] [] 0 0 0 0 0})
I0816 21:17:59.266427       1 queuejob_controller_ex.go:1868] [syncQueueJob] Pod counts updated for app wrapper 'quota-errors/deployment-silver-lo-pri-1replica' Version=907 Status.CanRun=true Status.State=Running, pod counts [Pending: 1, Running: 1, Succeded: 0, Failed 0]
I0816 21:17:59.275837       1 queuejob_controller_ex.go:1868] [syncQueueJob] Pod counts updated for app wrapper 'quota-errors/deployment-silver-lo-pri-1replica' Version=909 Status.CanRun=true Status.State=Running, pod counts [Pending: 1, Running: 1, Succeded: 0, Failed 0]
I0816 21:17:59.275900       1 queuejob_controller_ex.go:2001] [manageQueueJob] Getting completion status for app wrapper 'quota-errors/deployment-silver-lo-pri-1replica' Version=909 Status.CanRun=true Status.State=Running, pod counts [Pending: 1, Running: 1, Succeded: 0, Failed 0]
E0816 21:18:06.403286       1 qm_lib_backend_with_quotasubt_mgr.go:620] [Release] Quota release for quota-errors/deployment-silver-lo-pri-1replica failed.
E0816 21:18:06.403299       1 qm_lib_backend_with_quotasubt_mgr.go:628] [Release] Error removing Quota request definition id: NAMESPACE_quota-errors_AWNAME_deployment-silver-lo-pri-1replica for AppWrapper quota-errors/deployment-silver-lo-pri-1replica, err=&errors.errorString{s:"consumer NAMESPACE_quota-errors_AWNAME_deployment-silver-lo-pri-1replica does not exist"}.
W0816 21:18:06.403305       1 qm_lib_backend_with_quotasubt_mgr.go:637] [Release] Removing Quota request definition for quota-errors/deployment-silver-lo-pri-1replica unsuccessful.
I0816 21:18:11.494937       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-gold-lo-pri-1replica *Delay=0.005782 seconds RemainingLength=0 &qj=0x40000ed000 Version=970 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Queueing ControllerFirstTimestamp:2023-08-16 21:18:11.489149 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before manageQueueJob - setQueueing Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:11.489149 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:11.489149 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:11.489159 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:11.489159 +0000 UTC Reason:AwaitingHeadOfLine Message:}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:18:11.502768       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-gold-lo-pri-1replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:11.489149 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:11.489149 +0000 UTC 2023-08-16 21:18:11.489149 +0000 UTC  } {Queueing True 2023-08-16 21:18:11.489159 +0000 UTC 2023-08-16 21:18:11.489159 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:11.494978 +0000 UTC 2023-08-16 21:18:11.494978 +0000 UTC FrontOfQueue. }] [] 0 0 0 0 0}
I0816 21:18:11.503012       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-gold-lo-pri-1replica' with resources cpu 600.00, memory 99614720.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:18:11.503117       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-gold-lo-pri-1replica/job-gold-lo-pri-1replica' at 133.375µs activeQ=false Unsched=true &qj=0x40000ed000 Version=971 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:11.489149 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:11.489149 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:11.489149 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:11.489159 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:11.489159 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:11.494978 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:11.494978 +0000 UTC Reason:FrontOfQueue. Message:}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
I0816 21:18:11.503657       1 queuejob_controller_ex.go:1183] [ScheduleNext] [Agent mode] quota evaluation successful for app wrapper 'test/job-gold-lo-pri-1replica' activeQ=%!t(time.Duration=648959) Unsched=false &qj=%!p(bool=true) Version=&{{ } {job-gold-lo-pri-1replica  test  991fd556-df60-44ff-8d81-fc147507347f 971 %!s(int64=1) 2023-08-16 21:18:11 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:gold quota_service:gold] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:11 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:18:11 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-gold-lo-pri-1replica"},"name":"job-gold-lo-pri-1replica","namespace":"test"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"job-gold-lo-pri-1replica"}},"template":{"metadata":{"labels":{"app":"job-gold-lo-pri-1replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-gold-lo-pri-1replica","resources":{"limits":{"cpu":"600m","memory":"95Mi"},"requests":{"cpu":"600m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:11.489149 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:11.489149 +0000 UTC 2023-08-16 21:18:11.489149 +0000 UTC  } {Queueing True 2023-08-16 21:18:11.489159 +0000 UTC 2023-08-16 21:18:11.489159 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:11.494978 +0000 UTC 2023-08-16 21:18:11.494978 +0000 UTC FrontOfQueue. }] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=971%!(EXTRA v1beta1.AppWrapperStatus={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:11.489149 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:11.489149 +0000 UTC 2023-08-16 21:18:11.489149 +0000 UTC  } {Queueing True 2023-08-16 21:18:11.489159 +0000 UTC 2023-08-16 21:18:11.489159 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:11.494978 +0000 UTC 2023-08-16 21:18:11.494978 +0000 UTC FrontOfQueue. }] [] 0 0 0 0 0})
I0816 21:18:11.577543       1 queuejob_controller_ex.go:1868] [syncQueueJob] Pod counts updated for app wrapper 'test/job-gold-lo-pri-1replica' Version=977 Status.CanRun=true Status.State=Running, pod counts [Pending: 0, Running: 0, Succeded: 0, Failed 0]
I0816 21:18:11.577697       1 queuejob_controller_ex.go:2001] [manageQueueJob] Getting completion status for app wrapper 'test/job-gold-lo-pri-1replica' Version=977 Status.CanRun=true Status.State=Running, pod counts [Pending: 0, Running: 0, Succeded: 0, Failed 0]
I0816 21:18:12.528828       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=0.007519 seconds RemainingLength=0 &qj=0x400090d000 Version=992 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Queueing ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before manageQueueJob - setQueueing Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:18:12.531828       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. }] [] 0 0 0 0 0}
I0816 21:18:12.532027       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 3400.00, memory 16576077824.00, GPU 16
I0816 21:18:12.532104       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 144.709µs activeQ=false Unsched=true &qj=0x400090d000 Version=993 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:18:12.532210       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:18:12.532264       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=301417) Unsched=false &qj=%!p(bool=true) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 993 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. }] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=993 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. }] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:18:32.539431       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=20.018121 seconds RemainingLength=1 &qj=0x40004c8800 Version=994 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:18:32.545302       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:18:32.545467       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:18:32.545509       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 133.834µs activeQ=true Unsched=false &qj=0x40004c8800 Version=1031 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:18:32.545550       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:18:32.545564       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=187792) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1031 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:18:32 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1031 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:18:52.555276       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=40.033964 seconds RemainingLength=1 &qj=0x400090c000 Version=1032 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:18:52.558683       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:18:52.558904       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:18:52.558980       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 156.25µs activeQ=true Unsched=false &qj=0x400090c000 Version=1062 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:18:52.559043       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_service'"}.
I0816 21:18:52.559084       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=232916) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1062 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:18:52 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1062 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_service')
I0816 21:19:12.562687       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-gold-high-pri-1replica *Delay=40.023274 seconds RemainingLength=1 &qj=0x400090cc00 Version=1061 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:1000 QueueJobState:Queueing ControllerFirstTimestamp:2023-08-16 21:18:32.539407 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before manageQueueJob - setQueueing Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:32.539408 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:32.539408 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:52.548827 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:52.548827 +0000 UTC Reason:AwaitingHeadOfLine Message:}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:19:12.568897       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-gold-high-pri-1replica' Status={0 0 0 0 0 false false Pending  1000 HeadOfLine 2023-08-16 21:18:32.539407 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:32.539408 +0000 UTC 2023-08-16 21:18:32.539408 +0000 UTC  } {Queueing True 2023-08-16 21:18:52.548827 +0000 UTC 2023-08-16 21:18:52.548827 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:19:12.562776 +0000 UTC 2023-08-16 21:19:12.562776 +0000 UTC FrontOfQueue. }] [] 0 0 0 0 0}
I0816 21:19:12.569727       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-gold-high-pri-1replica' with resources cpu 600.00, memory 99614720.00, GPU 0 to be scheduled on aggregated idle resources cpu 4600.00, memory 16775307264.00, GPU 16
I0816 21:19:12.569803       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-gold-high-pri-1replica/job-gold-high-pri-1replica' at 814.208µs activeQ=false Unsched=true &qj=0x400090cc00 Version=1092 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:1000 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:32.539407 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:32.539408 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:32.539408 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:52.548827 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:52.548827 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:19:12.562776 +0000 UTC LastTransitionMicroTime:2023-08-16 21:19:12.562776 +0000 UTC Reason:FrontOfQueue. Message:}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
I0816 21:19:12.569876       1 queuejob_controller_ex.go:1183] [ScheduleNext] [Agent mode] quota evaluation successful for app wrapper 'test/job-gold-high-pri-1replica' activeQ=%!t(time.Duration=886166) Unsched=false &qj=%!p(bool=true) Version=&{{ } {job-gold-high-pri-1replica  test  ebb90a74-0db3-4490-ba2e-6dc0faa3c48b 1092 %!s(int64=1) 2023-08-16 21:18:13 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:gold quota_service:gold] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:13 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:priority":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:19:12 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{},"f:systempriority":{}}} status}]} {%!s(int32=1000) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-gold-high-pri-1replica"},"name":"job-gold-high-pri-1replica","namespace":"test"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"job-gold-high-pri-1replica"}},"template":{"metadata":{"labels":{"app":"job-gold-high-pri-1replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-gold-high-pri-1replica","resources":{"limits":{"cpu":"600m","memory":"95Mi"},"requests":{"cpu":"600m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=1000) HeadOfLine 2023-08-16 21:18:32.539407 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:32.539408 +0000 UTC 2023-08-16 21:18:32.539408 +0000 UTC  } {Queueing True 2023-08-16 21:18:52.548827 +0000 UTC 2023-08-16 21:18:52.548827 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:19:12.562776 +0000 UTC 2023-08-16 21:19:12.562776 +0000 UTC FrontOfQueue. }] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1092%!(EXTRA v1beta1.AppWrapperStatus={0 0 0 0 0 false false Pending  1000 HeadOfLine 2023-08-16 21:18:32.539407 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:32.539408 +0000 UTC 2023-08-16 21:18:32.539408 +0000 UTC  } {Queueing True 2023-08-16 21:18:52.548827 +0000 UTC 2023-08-16 21:18:52.548827 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:19:12.562776 +0000 UTC 2023-08-16 21:19:12.562776 +0000 UTC FrontOfQueue. }] [] 0 0 0 0 0})
I0816 21:19:12.575920       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=60.054562 seconds RemainingLength=1 &qj=0x40000ec000 Version=1063 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:19:12.579737       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:19:12.579888       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 3400.00, memory 16576077824.00, GPU 16
I0816 21:19:12.587588       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 7.780416ms activeQ=true Unsched=false &qj=0x40000ec000 Version=1094 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:19:12.587854       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:19:12.590908       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=11031333) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1094 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:19:12 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1094 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:19:32.648335       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=80.127023 seconds RemainingLength=1 &qj=0x4000630800 Version=1095 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:19:32.654054       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:19:32.654247       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 3400.00, memory 16576077824.00, GPU 16
I0816 21:19:32.654304       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 160.5µs activeQ=true Unsched=false &qj=0x4000630800 Version=1132 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:19:32.654347       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:19:32.654369       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=213875) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1132 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:19:32 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1132 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:19:52.662491       1 queuejob_controller_ex.go:1868] [syncQueueJob] Pod counts updated for app wrapper 'test/job-gold-high-pri-1replica' Version=1129 Status.CanRun=true Status.State=Running, pod counts [Pending: 0, Running: 1, Succeded: 0, Failed 0]
I0816 21:19:52.667072       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=100.145764 seconds RemainingLength=1 &qj=0x400090c000 Version=1133 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:19:52.673753       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:19:52.674339       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:19:52.674488       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 586.458µs activeQ=true Unsched=false &qj=0x400090c000 Version=1169 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:19:52.674550       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:19:52.674573       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=669625) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1169 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:19:52 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1169 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:20:12.673109       1 queuejob_controller_ex.go:1868] [syncQueueJob] Pod counts updated for app wrapper 'test/job-gold-high-pri-1replica' Version=1168 Status.CanRun=true Status.State=Running, pod counts [Pending: 0, Running: 1, Succeded: 0, Failed 0]
I0816 21:20:12.673187       1 queuejob_controller_ex.go:2001] [manageQueueJob] Getting completion status for app wrapper 'test/job-gold-high-pri-1replica' Version=1168 Status.CanRun=true Status.State=Running, pod counts [Pending: 0, Running: 1, Succeded: 0, Failed 0]
I0816 21:20:12.673215       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=120.151909 seconds RemainingLength=1 &qj=0x400090d400 Version=1169 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:20:12.677937       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:20:12.678149       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:20:12.678451       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 405.25µs activeQ=true Unsched=false &qj=0x400090d400 Version=1200 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:20:12.678495       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:20:12.678516       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=459458) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1200 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:20:12 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1200 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:20:32.688532       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=140.167222 seconds RemainingLength=1 &qj=0x40004c8800 Version=1201 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:20:32.697213       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:20:32.697720       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:20:32.697871       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 578.542µs activeQ=true Unsched=false &qj=0x40004c8800 Version=1230 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:20:32.697918       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:20:32.697929       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=636000) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1230 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:20:32 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1230 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:20:52.702790       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=160.181479 seconds RemainingLength=1 &qj=0x4000075c00 Version=1231 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:20:52.712225       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:20:52.712565       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:20:52.712806       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 475.416µs activeQ=true Unsched=false &qj=0x4000075c00 Version=1260 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:20:52.712868       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:20:52.712884       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=552250) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1260 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:20:52 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1260 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:21:12.713011       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=180.191699 seconds RemainingLength=1 &qj=0x40000ec800 Version=1261 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:21:12.721522       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:21:12.721767       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:21:12.722066       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 402.25µs activeQ=true Unsched=false &qj=0x40000ec800 Version=1291 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:21:12.722107       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:21:12.722131       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=466208) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1291 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:21:12 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1291 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:21:32.729466       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=200.208157 seconds RemainingLength=1 &qj=0x400090c000 Version=1292 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:21:32.735682       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:21:32.736154       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:21:32.736208       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 386.792µs activeQ=true Unsched=false &qj=0x400090c000 Version=1321 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:21:32.736294       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:21:32.736310       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=487167) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1321 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:21:32 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1321 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:21:52.746206       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=220.224897 seconds RemainingLength=1 &qj=0x40000ec800 Version=1322 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:21:52.751058       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:21:52.751345       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:21:52.751511       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 328.667µs activeQ=true Unsched=false &qj=0x40000ec800 Version=1351 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:21:52.751563       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:21:52.751578       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=395000) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1351 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:21:52 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1351 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:22:12.755321       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=240.234011 seconds RemainingLength=1 &qj=0x40000ecc00 Version=1352 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:22:12.760063       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:22:12.760362       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:22:12.760491       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 249.667µs activeQ=true Unsched=false &qj=0x40000ecc00 Version=1381 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:22:12.760573       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:22:12.760589       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=346250) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1381 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:22:12 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1381 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:22:32.764916       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=260.243607 seconds RemainingLength=1 &qj=0x40004c8800 Version=1382 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:22:32.770977       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:22:32.771151       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:22:32.771351       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 296.875µs activeQ=true Unsched=false &qj=0x40004c8800 Version=1411 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:22:32.771390       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:22:32.771401       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=346042) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1411 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:22:32 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1411 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:22:52.774868       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=280.253543 seconds RemainingLength=1 &qj=0x40000ec800 Version=1412 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:22:52.783361       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:22:52.783612       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:22:52.783690       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 180.75µs activeQ=true Unsched=false &qj=0x40000ec800 Version=1440 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:22:52.783777       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:22:52.783793       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=281750) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1440 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:22:52 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1440 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:23:12.789744       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=300.268435 seconds RemainingLength=1 &qj=0x400090c000 Version=1441 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:23:12.793743       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:23:12.793914       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:23:12.793952       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 141.542µs activeQ=true Unsched=false &qj=0x400090c000 Version=1470 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:23:12.793991       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_service'"}.
I0816 21:23:12.794006       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=193875) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1470 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:23:12 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1470 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_service')
I0816 21:23:32.800438       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=320.279129 seconds RemainingLength=1 &qj=0x4000630c00 Version=1471 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:23:32.805381       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:23:32.805814       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:23:32.806154       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 645.166µs activeQ=true Unsched=false &qj=0x4000630c00 Version=1501 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:23:32.806214       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:23:32.806229       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=720333) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1501 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:23:32 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1501 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:23:52.811056       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=340.289747 seconds RemainingLength=1 &qj=0x4000630800 Version=1502 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:23:52.817168       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:23:52.817577       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:23:52.817672       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 371.459µs activeQ=true Unsched=false &qj=0x4000630800 Version=1530 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:23:52.817778       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:23:52.817794       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=491750) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1530 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:23:52 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1530 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:24:12.822970       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=360.301660 seconds RemainingLength=1 &qj=0x40000ed800 Version=1531 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:24:12.830025       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:24:12.830441       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:24:12.830562       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 337.167µs activeQ=true Unsched=false &qj=0x40000ed800 Version=1560 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:24:12.830636       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:24:12.830687       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=461167) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1560 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:24:12 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1560 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:24:32.836720       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=380.315399 seconds RemainingLength=1 &qj=0x40000ec800 Version=1561 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:24:32.851509       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:24:32.851804       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:24:32.852041       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 392.667µs activeQ=true Unsched=false &qj=0x40000ec800 Version=1589 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:24:32.852116       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_service'"}.
I0816 21:24:32.852131       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=481375) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1589 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:24:32 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1589 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_service')
I0816 21:24:52.857431       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=400.336119 seconds RemainingLength=1 &qj=0x4000630c00 Version=1591 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:24:52.863101       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:24:52.864175       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:24:52.864711       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 1.409625ms activeQ=true Unsched=false &qj=0x4000630c00 Version=1619 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:24:52.864788       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:24:52.864816       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=1513750) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1619 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:24:52 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1619 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
I0816 21:25:12.868305       1 queuejob_controller_ex.go:939] [ScheduleNext] activeQ.Pop job-bad-quota-id-10replica *Delay=420.346964 seconds RemainingLength=1 &qj=0x40000ec800 Version=1620 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:Backoff ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before [backoff] - Rejoining Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}
I0816 21:25:12.877733       1 queuejob_controller_ex.go:1034] [ScheduleNext] [Agent Mode] Attempting to dispatch next appwrapper: 'test/job-bad-quota-id-10replica' Status={0 0 0 0 0 false false Pending  0 HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC true before ScheduleNext - setHOL false [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] 0 0 0 0 0}
I0816 21:25:12.878110       1 queuejob_controller_ex.go:1121] [ScheduleNext] [Agent Mode] Appwrapper 'test/job-bad-quota-id-10replica' with resources cpu 1000.00, memory 996147200.00, GPU 0 to be scheduled on aggregated idle resources cpu 4000.00, memory 16675692544.00, GPU 16
I0816 21:25:12.878275       1 queuejob_controller_ex.go:1133] [ScheduleNext] [Agent Mode] available resourse successful check for 'job-bad-quota-id-10replica/job-bad-quota-id-10replica' at 334.042µs activeQ=true Unsched=false &qj=0x40000ec800 Version=1650 Status={Pending:0 Running:0 Succeeded:0 Failed:0 MinAvailable:0 CanRun:false IsDispatched:false State:Pending Message: SystemPriority:0 QueueJobState:HeadOfLine ControllerFirstTimestamp:2023-08-16 21:18:12.521305 +0000 UTC ControllerFirstDispatchTimestamp:0001-01-01 00:00:00 +0000 UTC FilterIgnore:true Sender:before ScheduleNext - setHOL Local:false Conditions:[{Type:Init Status:True LastUpdateMicroTime:2023-08-16 21:18:12.521306 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.521306 +0000 UTC Reason: Message:} {Type:Queueing Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52132 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52132 +0000 UTC Reason:AwaitingHeadOfLine Message:} {Type:HeadOfLine Status:True LastUpdateMicroTime:2023-08-16 21:18:12.52886 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.52886 +0000 UTC Reason:FrontOfQueue. Message:} {Type:Backoff Status:True LastUpdateMicroTime:2023-08-16 21:18:12.532403 +0000 UTC LastTransitionMicroTime:2023-08-16 21:18:12.532403 +0000 UTC Reason:quota limit exceeded Message:Insufficient quota to dispatch AppWrapper.}] PendingPodConditions:[] TotalCPU:0 TotalMemory:0 TotalGPU:0 RequeueingTimeInSeconds:0 NumberOfRequeueings:0}.
E0816 21:25:12.878379       1 qm_lib_backend_with_quotasubt_mgr.go:561] [Fits] Error allocating consumer: test/job-bad-quota-id-10replica, err=&errors.errorString{s:" Failed to allocate quota on quota designation 'quota_context'"}.
I0816 21:25:12.878425       1 queuejob_controller_ex.go:1191] [ScheduleNext] [Agent Mode] Blocking dispatch for app wrapper 'test/job-bad-quota-id-10replica' due to quota limits, activeQ=%!t(time.Duration=474167) Unsched=true &qj=%!p(bool=false) Version=&{{ } {job-bad-quota-id-10replica  test  2442f299-959e-4509-afca-4940965960cd 1650 %!s(int64=1) 2023-08-16 21:18:12 +0000 UTC <nil> %!s(*int64=<nil>) map[quota_context:context-root2 quota_service:service-root2] map[] [] [] [{kubectl-kuttl Update mcad.ibm.com/v1beta1 2023-08-16 21:18:12 +0000 UTC FieldsV1 {"f:metadata":{"f:labels":{".":{},"f:quota_context":{},"f:quota_service":{}}},"f:spec":{".":{},"f:resources":{".":{},"f:GenericItems":{}},"f:service":{".":{},"f:spec":{}}}} } {mcad-controller Update mcad.ibm.com/v1beta1 2023-08-16 21:25:12 +0000 UTC FieldsV1 {"f:status":{".":{},"f:conditions":{},"f:controllerfirsttimestamp":{},"f:filterignore":{},"f:queuejobstate":{},"f:sender":{},"f:state":{}}} status}]} {%!s(int32=0) %!s(float64=0) {{[] map[]  []  []   []   %!s(int32=0) %!s(bool=false) nil [] %!s(*v1.IPFamilyPolicy=<nil>) %!s(*bool=<nil>) %!s(*string=<nil>) %!s(*v1.ServiceInternalTrafficPolicyType=<nil>)}} {[{%!s(int32=1) %!s(*int32=<nil>) %!s(int32=0) %!s(int32=0) %!s(float64=0) {{"apiVersion":"apps/v1","kind":"StatefulSet","metadata":{"labels":{"app":"job-bad-quota-id-10replica"},"name":"job-bad-quota-id-10replica","namespace":"test"},"spec":{"replicas":10,"selector":{"matchLabels":{"app":"job-bad-quota-id-10replica"}},"template":{"metadata":{"labels":{"app":"job-bad-quota-id-10replica","size":"1"}},"spec":{"containers":[{"command":["/bin/sh","-c","while true; do sleep 10; done"],"image":"registry.access.redhat.com/ubi8/ubi:latest","name":"job-bad-quota-id-10replica","resources":{"limits":{"cpu":"100m","memory":"95Mi"},"requests":{"cpu":"100m","memory":"95Mi"}}}]}}}} <nil>} [] }]} nil {map[] %!s(int=0) {%!s(int=0) %!s(int=0) %!s(int=0)  %!s(int=0) %!s(int=0)} {%!s(int=0) %!s(int=0) %!s(bool=false)}}} {%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}} Status=1650 msg={%!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(bool=false) %!s(bool=false) Pending  %!s(float64=0) HeadOfLine 2023-08-16 21:18:12.521305 +0000 UTC 0001-01-01 00:00:00 +0000 UTC %!s(bool=true) before ScheduleNext - setHOL %!s(bool=false) [{Init True 2023-08-16 21:18:12.521306 +0000 UTC 2023-08-16 21:18:12.521306 +0000 UTC  } {Queueing True 2023-08-16 21:18:12.52132 +0000 UTC 2023-08-16 21:18:12.52132 +0000 UTC AwaitingHeadOfLine } {HeadOfLine True 2023-08-16 21:18:12.52886 +0000 UTC 2023-08-16 21:18:12.52886 +0000 UTC FrontOfQueue. } {Backoff True 2023-08-16 21:18:12.532403 +0000 UTC 2023-08-16 21:18:12.532403 +0000 UTC quota limit exceeded Insufficient quota to dispatch AppWrapper.}] [] %!s(int32=0) %!s(int32=0) %!s(int32=0) %!s(int=0) %!s(int=0)}%!(EXTRA string= Failed to allocate quota on quota designation 'quota_context')
